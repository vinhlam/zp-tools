!function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=49)}({2:function(e,t,r){"use strict";function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.d(t,"d",(function(){return u})),r.d(t,"e",(function(){return c})),r.d(t,"b",(function(){return f})),r.d(t,"a",(function(){return d})),r.d(t,"c",(function(){return b}));var i=/(.*)\((.*?)\)/,u=function(e){return Array.isArray(e)?e[0]:e},c=function(e){var t=parseInt(Math.abs(e)/1e3/60),r=(parseFloat(Math.abs(e)/1e3)%60).toFixed(1);return"".concat(e<0?"-":"+"," ").concat(t?t+":":"").concat(r<10&&t?"0":"").concat(r)},f=function(e){return l(e).squad},l=function(e){return e.match(i)&&{name:e.match(i)[1].trim(),squad:e.match(i)[2].replace(/\s+/g," ").toUpperCase().trim()}||{}},d=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return Object.values(e.filter((function(e){var r=e.label;return"All"===t||r===t})).filter((function(e){var t=e.name;return f(t)&&f(t).toLowerCase().match(r.toLowerCase())})).map((function(e){return o(o({},e),{},{squad:f(e.name)})})).reduce((function(e,t){return e[t]?e:o(o({},e),{},a({},t.squad,{key:t.squad,value:t.squad}))}),{})).filter((function(e){return e.key}))},s=function(e,t,r){return(e*r+t)/(r+1)},b=function(e,t,r){var n=e.map((function(e){return o(o({},e),{},{squad:f(e.name)})})).filter((function(e){var r=e.label;return"All"===t||r===t})).filter((function(e){return""!==e.squad})).reduce((function(e,t){var r=e[t.squad]||o(o({},t),{},{count:0,avg_race_time:0,avg_eta:0});return r.count>=8?e:o(o({},e),{},a({},t.squad,o(o({},r),{},{finished:r.finished||1===t.fin,count:r.count+1,avg_race_time:s(r.avg_race_time,parseInt(u(t.race_time)),r.count),avg_eta:s(r.avg_eta,t.eta,r.count)})))}),{}),i=n[r]||{};return Object.values(n).map((function(e){return o(o({},e),{},{eta_diff:Number(e.avg_eta)-Number(i.avg_eta),team_time_diff:Number(e.time_diff)-Number(i.time_diff),race_time_diff:6e4*Math.round((Number(e.avg_race_time)-Number(i.avg_race_time))/60/1e3)})}))}},46:function(e,t,r){"use strict";function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}r.d(t,"a",(function(){return u}));var u=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.store=t,this.storeKey=r}var t,r,n;return t=e,(r=[{key:"getTeamData",value:function(){return this.store[this.storeKey]?JSON.parse(this.store[this.storeKey]):{}}},{key:"setTeamData",value:function(e){this.store[this.storeKey]=JSON.stringify(e)}},{key:"addTeamMember",value:function(e,t){var r=this.store[this.storeKey]?JSON.parse(this.store[this.storeKey]):{},n=o(o({},r),{},a({},String(e).trim(),o(o(o({},r[e]),t),{},{zid:e})));this.setTeamData(n)}},{key:"removeTeamMember",value:function(e){var t=this.getTeamData();delete t[String(e).trim()],this.setTeamData(t)}}])&&i(t.prototype,r),n&&i(t,n),e}()},49:function(e,t,r){"use strict";r.r(t);var n=r(7),o=r(46);window.vlTeamPanel?document.body.appendChild(window.vlTeamPanel):function(){var e=new o.a(window.localStorage,"vlTeam"),t=["zid","name","w15","w60","w300","w1200","wkg15","wkg60","wkg300","wkg1200","max_hr"],r=function(e){$("td.athlete_col a").css("backgroundColor",e?"rgb(255,255,100,0.3)":""),$("td.athlete_col a").css("cursor",e?"copy":"")},a=function(){var t=e.getTeamData();$(window.vlTeamPanel).html(u(t))},i=function(t){fetch("/api3.php?do=profile_results&z=".concat(t,"&type=all&_=").concat(Date.now())).then((function(e){return e.json()})).then((function(e){var t=e.data;return Object(n.a)(t)})).then((function(r){return e.addTeamMember(t,r)})).then(a)},u=function(e){return'\n  <button onclick="window.vl.handleAddTeamMember()">Add Team Members</button>\n  <button onclick="window.vl.closeTeamPanel()">Close</button>\n  <table class="table">\n  <thead>'.concat(t.map((function(e){return"<th>".concat(e,"</th>")})).join(""),"</thead>\n  <tbody>\n  ").concat(Object.values(e).sort((function(e,t){return t.w1200-e.w1200})).map((function(e){return"\n    <tr>\n        ".concat(t.map((function(t){return"<td>".concat(e[t],"</td>")})).join(""),'\n        <td>\n          <button onclick="window.vl.removeTeamMember(').concat(e.zid,')">X</button>\n          <button onclick="window.vl.getProfile(').concat(e.zid,')">‚ü≥</button>\n        </td>\n    </tr>')})).join(""),"\n</tbody>\n  </table>\n  ")};window.vlTeamPanel=document.createElement("div"),document.body.appendChild(window.vlTeamPanel),$(window.vlTeamPanel).css({position:"absolute",width:"1000px",top:"20px",height:"400px",zIndex:1e4,backgroundColor:"rgb(255, 255, 200, 0.8)",right:"20px",border:"2px solid black",overflow:"scroll"}),a(),window.vl={handleAddTeamMember:function(){r(!0),$(document.documentElement).one("click",(function(e){var t=e.target,n=e.stopPropagation;if(t&&t.href){var o=t.href.match(".*?z=(.*)");if(o){var a=o[1];i(a)}}return n(),r(!1),!1})),event.stopPropagation()},closeTeamPanel:function(){document.body.removeChild(window.vlTeamPanel)},removeTeamMember:function(t){e.removeTeamMember(t),a()},getProfile:i}}()},7:function(e,t,r){"use strict";r.d(t,"a",(function(){return l})),r.d(t,"b",(function(){return d}));var n=r(2);function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var u=["w15","w60","w300","w1200","wkg15","wkg60","wkg300","wkg1200","max_hr"],c=[{id:"C",power:150,wkg:2.5},{id:"B",power:200,wkg:3.2},{id:"A",power:250,wkg:4},{id:"A+",power:300,wkg:4.6}],f=parseInt(Date.now()/1e3)-7776e3,l=function(e){var t=function(e){return e.filter((function(e){return e.event_date>f})).reduce((function(e,t){var r=u.map((function(r){return Number(e[r])>Number(Object(n.d)(t[r]))?e[r]:Object(n.d)(t[r])})),o=u.reduce((function(e,t,n){return a(a({},e),{},i({},t,r[n]))}),{});return a({},o)}),{})}(e),r=function(e){return e.sort((function(e,t){return t.event_date-e.event_date})).shift()||{}}(e),o=r.name,l=r.age,d=r.div,s=r.divw,b=r.tid,p=r.tname,m=r.tc,w=r.tbc,v=r.tbd,g=r.power_type,y=r.weight,O=r.zid;if(Array.isArray(y)&&0===y[0])var h=e[0].w15/e[0].wkg15;var j=function(e){var t=e.filter((function(e){return e.event_date>f})).filter((function(e){return e.f_t.includes("TYPE_RACE")})).map((function(e){var t=e.w1200,r=e.weight;return{wkg:Number(Object(n.d)(t))/Object(n.d)(r)*.95,power:.95*Number(Object(n.d)(t))}})).sort((function(e,t){return t.wkg-e.wkg})).reduce((function(e,t,r){return r<3?{wkg:(e.wkg*r+Number(t.wkg))/(r+1),power:(e.power*r+Number(t.power))/(r+1)}:e}),{wkg:0,power:0}),r=t.wkg,o=t.power;return{wkg:Number(r).toFixed(2),power:Number(o).toFixed(1)}}(e),P=function(e){var t=e.wkg,r=e.power;return c.reduce((function(e,n){return t>=n.wkg&&r>=n.power?n.id:e}),"D")}(j);return a(a({},t),{},{category:P,name:o,age:l,div:d,divw:s,tid:b,tname:p,tc:m,tbc:w,tbd:v,power_type:g,weight:h||y,zid:O},j)},d=function(e,t){return e.reduce((function(e,r){return a(a({},e),Object.keys(r).reduce((function(n,o){return a(a({},n),{},i({},o,t(r[o],e[o])))}),{}))}),{})}}});